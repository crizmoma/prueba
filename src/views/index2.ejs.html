<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto Agro Tecnology</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">


    <script type="text/javascript">
        function actualizar() {
            location.reload(true);
        }
        //Función para actualizar cada 3 segundos(3000 milisegundos)
        setInterval("actualizar()", 2000);
    </script>

    <script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
    <script type="text/javascript" src="https://www.amcharts.com/lib/3/gauge.js"></script>
    <script type="text/javascript" src="https://www.amcharts.com/lib/3/themes/dark.js"></script>


    <% var contador =0;
for(var i=0; i < val.length; i++)
{
    var suelo= val[i].Suelo;
    var temperatura = val[i].Temperatura;
    var humedad = val[i].Humedad
    var fecha = val[i].Fecha;
}
%>
        <script>
            var datos = "<%= suelo %>";
            AmCharts.makeChart("chartdiv", {
                type: "gauge",
                marginBottom: 20,
                marginTop: 40,
                startDuration: 0,
                fontSize: 20,
                theme: "dark",
                arrows: [{
                    id: "GaugeArrow-1",
                    "value": datos
                }],
                axes: [{
                    axisThickness: 1,
                    bottomText: datos + " % humedad suelo",
                    bottomTextYOffset: -20,
                    fontSize: 13,
                    endValue: 1100,
                    id: "GaugeAxis-1",
                    valueInterval: 100,
                    bands: [{
                        alpha: 0.7,
                        color: "#00FF00",
                        endValue: 400,
                        id: "GaugeBand-1",
                        innerRadius: "80%",
                        startValue: 0
                    }, {
                        alpha: 0.7,
                        color: "#FFFF00",
                        endValue: 800,
                        id: "GaugeBand-2",
                        innerRadius: "80%",
                        startValue: 400
                    }, {
                        alpha: 0.7,
                        color: "#ea3838",
                        endValue: 1100,
                        id: "GaugeBand-3",
                        innerRadius: "80%",
                        startValue: 800
                    }]
                }],
                allLabels: [],
                balloon: {},
                titles: []
            });
        </script>
        <script>
            var datos = "<%= humedad %>";
            AmCharts.makeChart("chartdiv1", {
                type: "gauge",
                marginBottom: 20,
                marginTop: 40,
                startDuration: 0,
                fontSize: 20,
                theme: "dark",
                arrows: [{
                    id: "GaugeArrow-1",
                    "value": datos
                }],
                axes: [{
                    axisThickness: 1,
                    bottomText: datos + " % humedad",
                    bottomTextYOffset: -20,
                    fontSize: 13,
                    endValue: 100,
                    id: "GaugeAxis-1",
                    valueInterval: 10,
                    bands: [{
                        alpha: 0.7,
                        color: "#ea3838",
                        endValue: 30,
                        id: "GaugeBand-1",
                        innerRadius: "80%",
                        startValue: 0
                    }, {
                        alpha: 0.7,
                        color: "#FFFF00",
                        endValue: 70,
                        id: "GaugeBand-2",
                        innerRadius: "80%",
                        startValue: 30
                    }, {
                        alpha: 0.7,
                        color: "#00FF00",
                        endValue: 100,
                        id: "GaugeBand-3",
                        innerRadius: "80%",
                        startValue: 70
                    }]
                }],
                allLabels: [],
                balloon: {},
                titles: []
            });
        </script>
        <script>
            var datos = "<%= temperatura %>";
            AmCharts.makeChart("chartdiv2", {
                type: "gauge",
                marginBottom: 20,
                marginTop: 40,
                startDuration: 0,
                fontSize: 20,
                theme: "dark",
                arrows: [{
                    id: "GaugeArrow-1",
                    "value": datos
                }],
                axes: [{
                    axisThickness: 1,
                    bottomText: datos + "°C temperatura",
                    bottomTextYOffset: -20,
                    fontSize: 13,
                    endValue: 70,
                    id: "GaugeAxis-1",
                    valueInterval: 10,
                    bands: [{
                        alpha: 0.7,
                        color: "#00FF00",
                        endValue: 27,
                        id: "GaugeBand-1",
                        innerRadius: "80%",
                        startValue: 0
                    }, {
                        alpha: 0.7,
                        color: "#FFFF00",
                        endValue: 45,
                        id: "GaugeBand-2",
                        innerRadius: "80%",
                        startValue: 27
                    }, {
                        alpha: 0.7,
                        color: "#ea3838",
                        endValue: 70,
                        id: "GaugeBand-3",
                        innerRadius: "80%",
                        startValue: 45
                    }]
                }],
                allLabels: [],
                balloon: {},
                titles: []
            });
        </script>
</head>
<style>
    .center {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 200px;
        height: 200px;
    }
    
    .centerr {
        text-align: center;
        color: rgb(202, 111, 182);
    }
</style>
<style>
    .center {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 200px;
        height: 200px;
    }
    
    .centerr {
        text-align: center;
        color: rgb(202, 111, 182);
    }
</style>

<body style="background-color:#bb131b">
    <nav class="navbar navbar-light" style="background-color 	:#7bdf1e;">
        <div class="container-fluid">
            <a href="/" class="navbar-brand">Proyecto</a>
            <form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
        </div>
    </nav>
    <p style="margin-left: 2em;"></p>
    <h1 class="center">Sensores</h1>

    <div class="container">
        <div class="row g-5">
            <div style="align-content: center;" class="input-group mb-3">
                <div class="col-md-6">
                    <div class="position-sticky" style="top: 2rem;">
                        <div class="p-4 mb-3 bg-light rounded">
                            <div class="card">
                                <div class="card-body">
                                    <div id="chartdiv2" style="width: 100%; height: 450px; background-color:#b20cd3;" class="center"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-1">

                </div>
                <div class="col-md-5">
                    <pre></pre>
                    <table class="table table-striped">
                        <thead class="table-dark">
                            <tr>
                                <th>Humedad</th>
                                <th>Temperatura °C</th>
                                <th>Humedad a</th>
                                <th>Fecha</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <%= suelo  %>
                                </td>
                                <td>
                                    <%= temperatura  %>
                                </td>
                                <td>
                                    <%= humedad %>
                                </td>
                                <td>
                                    <%= fecha  %>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
            <div class="col-md-6">
                <div class="position-sticky" style="top: 2rem;">
                    <div class="p-4 mb-3 bg-light rounded">
                        <div class="card">
                            <div class="card-body">
                                <div id="chartdiv" style="width: 100%; height: 450px; background-color:#b20cd3;" class="center"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="position-sticky" style="top: 2rem;">
                    <div class="p-4 mb-3 bg-light rounded">
                        <div class="card">
                            <div class="card-body">
                                <div id="chartdiv1" style="width: 100%; height: 450px; background-color:#b20cd3;" class="center"></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</body>

</html>